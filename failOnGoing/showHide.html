<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
    <style type="text/css">
    .isiContent {
        display: none;
    }

    .lblToggle {
        background: lightblue;
        padding: 5px;
        /*border-radius: 5px;*/
        /*box-shadow: 0px 0px 5px black;*/
        cursor: pointer;
        display: block;
        transition: all ease 0.5s;
        text-align: center;
        color: black;
    }

    .lblToggle:hover {

        background: aliceblue;
        color: black;
        box-shadow: 0px 0px 0px 1px black;
    }

    .lblToggle:after {
        content: '';
        color: white;
        background: url('data:image/svg+xml;utf8,<svg version="1.1" id="Chevron_down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path d="M4.516,7.548c0.436-0.446,1.043-0.481,1.576,0L10,11.295l3.908-3.747c0.533-0.481,1.141-0.446,1.574,0 c0.436,0.445,0.408,1.197,0,1.615c-0.406,0.418-4.695,4.502-4.695,4.502C10.57,13.888,10.285,14,10,14s-0.57-0.112-0.789-0.335 c0,0-4.287-4.084-4.695-4.502C4.107,8.745,4.08,7.993,4.516,7.548z"/></svg>');
        background-repeat: no-repeat;
        background-position: center;
        background-color: aliceblue;
        border-radius: 5px;
        width: 20px;
        height: 20px;
        position: relative;
        float: right;
        right: 10px;
        transition: all ease 0.5s;
        /* box-shadow: 0px 0px 2px black; */
    }

    .nomorId {
        float: left;
        background: lightblue;
        left: 0px;
        top: 0px;
        /*border-radius: 5px 0px 0px 5px;*/
        position: relative;
        padding: 5px 0px;
        padding-right: 10px;
        padding-left: 5px;
        border-right: 5px solid black;
        height: -webkit-fill-available;
    }

    .ctnBox {
        margin: 20px 0px;
    }

    .isiContent {
        /*margin:20px 0px;*/
        width: fill-available;

        padding: 5px;
        background: #f3f3f3;
        border: solid black 1px;
        /*border-radius: 5px;*/
        /*box-shadow: 0px 0px 5px lightblue,0px 0px 5px black;*/
    }

    input:checked+label.lblToggle:after {
        /*font-weight: bolder !important; */
        -webkit-transform: rotate(180deg);
        -moz-transform: rotate(180deg);
        -ms-transform: rotate(180deg);
        -o-transform: rotate(180deg);
        transform: rotate(180deg);

    }

    input.iptlblToggle {
        display: none;
    }

    @media only screen and (max-width: 600px) {
        .lblToggle {
            text-align: left;
            text-indent: 10px;
        }

        .lblTitle {
            position: relative;
            /* left: -150px; */

        }

        .lblTitle {
            position: relative;
        }
    </style>
    <div class="ctnBox">
        <label for="idp2" class="lblToggle">Lihat Cara yang panjang bahkan sangat panjang</label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox">
        <label for="idp2" class="lblToggle">Lihat Cara yang panjang bahkan sangat panjang</label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox">
        <label for="idp2" class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox2">
        <label class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox2">
        <label class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox3">
        <label class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
    <div class="ctnBox3">
        <label class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>
 <div class="ctnBox4">
        <label class="lblToggle"><span class="lblTitle">Lihat Cara yang panjang bahkan sangat panjang</span></label>
        <div class="isiContent" id="jwbxx">contoh Isi</div>
    </div>


     <div class="ctnBox4">
        <label>Lihat Cara yang panjang bahkan sangat panjang</label>
   <div></div>
        


    </div>



    <div id="test">
    <script type="text/javascript">
    let classIndex = [];
    let clickIndex='';
    let classToggle = '';

//#just for fun
    // for (var i = 0; i < 150; i++) {
        
    //     $('.ctnBox4').eq(i).find('div').eq(0).append(' <div class="ctnBox4">        <label>ya</label>   <div></div>   </div>     ');

    // }
//#end just for fun

        $('body').append('<div id="rotateScript"></div>');


        //============================= start fungsi ====================================
        function randid({ className = 'ctnBox' , labelClassName = 'lblToggle', randomColor = true, numbering = false }) {
           
            //angka=angka untuk random id dan for , sebagai penghubung label dan input
            classIndex.push('.' + className);

            // console.log('classIndex: '+classIndex[0])

            let iptClassName    = 'ipt' + labelClassName;
            classToggle         = iptClassName;
            nama                = className;
            className           = document.getElementsByClassName(className);
    
            //console.log(className.length);

            for (var i = 0; i < className.length; i++) {
               // console.log('x: ' + $(className).eq(i));
            $(className).eq(i).prepend('<span class="nomorId"></span><input  class="' + iptClassName + '" id="idp2" type="checkbox">');
            }

            let wrnrnd  = ("lightgreen,yellow,yellowgreen,lightblue,pink,aqua").split(',');
            let wrnrnd2 = ("#ccffbc,#fff294,#a4ec77,#c0f1ff,#f5dcff,lightblue").split(',');
            let lbl = document.getElementsByClassName(labelClassName);
            let ipt = document.getElementsByClassName(iptClassName);
            let isiClassName = 'isiContent';

            let generateId  = 0;
            let jjk1        = Math.floor(Math.random() * wrnrnd.length);
            let jjk2        = jjk1;

            //untuk random id dan for supaya tidak di lakukan penamaan manual
            for (var i = 0; i < className.length ; i++) {

                generateId  = i;
                jjk2        = jjk1;
                jjk1        = Math.floor(Math.random() * wrnrnd.length);


                if (jjk1 != jjk2) {

                    let random = 'dps' + generateId + nama;
                    console.log('no: ' + lbl.length);
                    let sblm;
                    sblm       = className[i].getElementsByClassName('nomorId');
                    //console.log('length: ' + $(className).eq(i).find('.nomorId').length)

                    

                    console.log('randomColor ' + randomColor)

                    //### jika setting random color = on
                    if (randomColor == true) {

                        //jika class lblToggle tidak ditemukan
                       
                        //jika class nomor id ditemukan
                        if ($(className).eq(i).find('.nomorId').length >= 1) {
                            sblm[0].style.background = wrnrnd[jjk1];
                        }

                        className[i].getElementsByClassName(isiClassName)[0].style.borderColor = wrnrnd[jjk1];
                        className[i].getElementsByClassName(isiClassName)[0].style.boxShadow = '0px 0px 10px ' + wrnrnd[jjk1] + ' 0px 0px 2px black';
                        className[i].getElementsByClassName(labelClassName)[0].style.background = wrnrnd2[jjk1];

                        
                    }
                    //### end dari kondisi random color


                    //##jika class tidak lbltoggle dan isicontent tidak ditemukan
                        if ($(className).eq(i).find('.lblToggle').length <= 0) {
                        className[i].getElementsByTagName('label')[0].setAttribute("class",'lblToggle');
                        }
                        if ($(className).eq(i).find('.isiContent').length <= 0) {
                        className[i].getElementsByTagName('div')[0].setAttribute("class",'isiContent');
                        }
                    //##end class tidak ditemukan

                    if ($(className).eq(i).find('.nomorId').length >= 1) {

                        
                       // sblm[0].style.height= className[i].offsetHeight - 10 + 'px';

                       //## option numbering
                        if (numbering==true) {

                        sblm[0].innerHTML   = '#' + parseInt(i + 1);
                        }
                        //##end option numbering

                    }


                    className[i].getElementsByClassName(labelClassName)[0].setAttribute("for", random);
                    className[i].getElementsByClassName(iptClassName)[0].setAttribute("id", random);
                    //ipt[i].setAttribute("id", random);

                } else {
                    i = i - 1;
                    console.log("sama muncul");
                }
            }


          




 }



    //============================= end fungsi ====================================



setTimeout(function() {

  clickIndex = '';
            for (var i = 0; i < classIndex.length; i++) {
                clickIndex += classIndex[i] + ',';


            }

            let clickWrite = ()=>{

            clickIndex = clickIndex.slice(0, -1);
            console.log('click index: ' + clickIndex)
            $(clickIndex).click(function() {
                console.log('masukc:');
                //coba = mendapatkan innerhtml dari ctnBox
                let ctnBox = $(this);
                //mencari class iptToggle (pilihjawab)
                $(this).find('.' + classToggle).eq(0).each(function() {
                    //jika  iptToggle checked


                    if ($(this).is(':checked')) {
                        $(ctnBox).find(".isiContent").eq(0).each(function() {
                            $(this).slideDown('slow');
                        });

                    } else {
                        $(ctnBox).find(".isiContent").eq(0).each(function() {
                            $(this).slideUp('slow');
                        });
                    }

                });

                //   $(this).find(".lblToggle").each(function () {
                //      $(this).hide('slow')

                // });

            });

        }

        let clickWriteString=clickWrite.toString();
            clickWriteString=clickWriteString.replace('()=>','')

        $('#rotateScript').html('');
        $('#rotateScript').append('<script>'+clickWriteString+'</'+'script>');



}, 10);




    randid({
        className: 'ctnBox',
        randomColor: true,
        numbering:true

    });
    randid({
        className: 'ctnBox2',
        randomColor: true

    });
    randid({
        className: 'ctnBox3',
        randomColor: false

    });

  randid({
        className: 'ctnBox4',
        randomColor: false,
        numbering:true

    });


    //console.log('classIndex: ' + classIndex[0])
    </script>
    </div>
</body>

</html>